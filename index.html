<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher's Report Data Entry</title>
    <link rel="stylesheet" href="theme-luxe-minimalist.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-luxe-minimalist">
    <div class="container">
        <header>
            <h1 class="pt-sidebar__logo app-title">Report Data Input</h1>
            <p class="text-color-muted">Enter student information. Use AI to help draft narrative sections.</p>
        </header>

        <!-- API Key Section (Still needed for in-app AI) -->
        <section class="pt-card">
            <h2 class="pt-card-title">A. Setup & AI Style Reference</h2>
            <div class="pt-input-group">
                <label for="apiKey">OpenAI API Key:</label>
                <input type="password" id="apiKey" class="pt-input" placeholder="Enter your OpenAI API Key (sk-...)">
                <small class="text-color-muted help-text">Required for AI text generation features.</small>
            </div>
            <div class="pt-input-group">
                <label for="previousExamples">Your Previous Report Examples (for AI tone & style):</label>
                <textarea id="previousExamples" class="pt-input" rows="5" placeholder="Paste 1-2 examples of your report writing style here. AI uses this for consistent tone."></textarea>
            </div>
        </section>

        <!-- Report Cover Information -->
        <section class="pt-card">
            <h2 class="pt-card-title">B. Report Cover Details</h2>
            <div class="pt-input-group">
                <label for="var_academicYear">Academic Year:</label>
                <input type="text" id="var_academicYear" name="var_academicYear" class="pt-input" placeholder="e.g., 2024/25" value="2024/25">
            </div>
            <div class="pt-input-group">
                <label for="var_teacherName">Teacher's Name (e.g., Miss Schofield):</label>
                <input type="text" id="var_teacherName" name="var_teacherName" class="pt-input" placeholder="Miss Schofield">
            </div>
        </section>

        <!-- Child's Name -->
        <section class="pt-card">
            <h2 class="pt-card-title">C. Child's Information</h2>
            <div class="pt-input-group">
                <label for="var_childFullName">Child's Full Name:</label>
                <input type="text" id="var_childFullName" name="var_childFullName" class="pt-input" placeholder="e.g., Alfie Burns">
            </div>
        </section>

        <!-- Subject Attainment and Effort -->
        <section class="pt-card">
            <h2 class="pt-card-title">D. Subject Attainment and Effort</h2>
            <p class="text-color-muted" style="margin-bottom: 15px;">Select attainment and effort for each subject.</p>
            <div class="subject-grid">
                <!-- Core Subjects -->
                <strong class="grid-header">Core Subjects</strong><div></div><div></div>
                <label for="var_readingAttainment">Reading:</label>
                <select id="var_readingAttainment" name="var_readingAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_readingEffort" name="var_readingEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_writingAttainment">Writing:</label>
                <select id="var_writingAttainment" name="var_writingAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_writingEffort" name="var_writingEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_mathematicsAttainment">Mathematics:</label>
                <select id="var_mathematicsAttainment" name="var_mathematicsAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_mathematicsEffort" name="var_mathematicsEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_scienceAttainment">Science:</label>
                <select id="var_scienceAttainment" name="var_scienceAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_scienceEffort" name="var_scienceEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
                
                <!-- Foundation Subjects -->
                <strong class="grid-header">Foundation Subjects</strong><div></div><div></div>
                <label for="var_artAttainment">Art:</label>
                <select id="var_artAttainment" name="var_artAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_artEffort" name="var_artEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_computingAttainment">Computing:</label>
                <select id="var_computingAttainment" name="var_computingAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_computingEffort" name="var_computingEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_designTechnologyAttainment">Design & Technology:</label>
                <select id="var_designTechnologyAttainment" name="var_designTechnologyAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_designTechnologyEffort" name="var_designTechnologyEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_frenchAttainment">French (Y3-6 only):</label>
                <select id="var_frenchAttainment" name="var_frenchAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option><option value="N/A">N/A</option></select>
                <select id="var_frenchEffort" name="var_frenchEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="N/A">N/A</option></select>

                <label for="var_geographyAttainment">Geography:</label>
                <select id="var_geographyAttainment" name="var_geographyAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_geographyEffort" name="var_geographyEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_historyAttainment">History:</label>
                <select id="var_historyAttainment" name="var_historyAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_historyEffort" name="var_historyEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_musicAttainment">Music:</label>
                <select id="var_musicAttainment" name="var_musicAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_musicEffort" name="var_musicEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_physicalEducationAttainment">Physical Education:</label>
                <select id="var_physicalEducationAttainment" name="var_physicalEducationAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_physicalEducationEffort" name="var_physicalEducationEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

                <label for="var_religiousEducationAttainment">Religious Education:</label>
                <select id="var_religiousEducationAttainment" name="var_religiousEducationAttainment" class="pt-input subject-grade"><option value="">Attainment</option><option value="GDS">GDS</option><option value="EXS">EXS</option><option value="WTS">WTS</option><option value="BLW">BLW</option></select>
                <select id="var_religiousEducationEffort" name="var_religiousEducationEffort" class="pt-input subject-grade"><option value="">Effort</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
            </div>
        </section>

        <!-- Attendance and Punctuality -->
        <section class="pt-card">
            <h2 class="pt-card-title">E. Attendance and Punctuality</h2>
            <div class="grid-2-col">
                <div class="pt-input-group">
                    <label for="var_attendancePercentageText">Attendance Rating Text:</label>
                    <select id="var_attendancePercentageText" name="var_attendancePercentageText" class="pt-input">
                        <option value="Attendance is 99% or 100%.">Excellent (99% or 100%)</option>
                        <option value="Attendance is 96% and above.">Good (96% and above)</option>
                        <option value="Attendance is 95% or below.">Below Expectations (95% or below)</option>
                        <option value="Attendance is below 91%.">Cause for concern (below 91%)</option>
                    </select>
                </div>
                <div class="pt-input-group">
                    <label for="var_punctualityText">Punctuality Rating Text:</label>
                    <select id="var_punctualityText" name="var_punctualityText" class="pt-input">
                        <option value="Always in school on time.">Always in school on time.</option>
                        <option value="Occasionally late (no more than 5 sessions).">Occasionally late (max 5)</option>
                        <option value="Frequently late for school (between 6 & 10 sessions).">Frequently late (6-10)</option>
                        <option value="11 or more late sessions.">11 or more late sessions.</option>
                    </select>
                </div>
            </div>
            <div class="pt-input-group">
                <label for="var_attendancePunctualityDateNote">Attendance/Punctuality Date Note (e.g., *Up to 13th June 2025):</label>
                <input type="text" id="var_attendancePunctualityDateNote" name="var_attendancePunctualityDateNote" class="pt-input" placeholder="*Up to 13th June 2025">
            </div>
        </section>

        <!-- Narrative Sections -->
        <section class="pt-card">
            <h2 class="pt-card-title">F. Report Narrative Sections</h2>
            
            <!-- Teacher's General Comments (AI Assisted) -->
            <div class="report-sub-section">
                <h3 class="sub-section-title">Teacher's General Comments</h3>
                <div class="ai-input-group">
                    <label for="teacherGeneralCommentsNotes">Shorthand/Notes for AI Generation:</label>
                    <textarea id="teacherGeneralCommentsNotes" class="pt-input notes-input" rows="5" placeholder="Enter notes on overall progress, personality, social skills, academic summary..."></textarea>
                    <button class="pt-button pt-button--secondary generate-ai-text-btn" data-target-id="var_teacherGeneralComments" data-source-id="teacherGeneralCommentsNotes" data-section-name="Teacher's General Comments">Generate Comment</button>
                </div>
                <label for="var_teacherGeneralComments" class="final-output-label">Generated Teacher's General Comments (Review & Edit):</label>
                <textarea id="var_teacherGeneralComments" name="var_teacherGeneralComments" class="pt-input final-text-output" rows="8" placeholder="AI-generated text will appear here..."></textarea>
            </div>

            <!-- Targets for the year ahead (Direct Input) -->
            <div class="report-sub-section">
                <h3 class="sub-section-title">Targets for the Year Ahead</h3>
                <div class="pt-input-group">
                    <label for="var_target1">Target 1:</label>
                    <input type="text" id="var_target1" name="var_target1" class="pt-input" placeholder="Enter first target">
                </div>
                <div class="pt-input-group">
                    <label for="var_target2">Target 2 (Optional):</label>
                    <input type="text" id="var_target2" name="var_target2" class="pt-input" placeholder="Enter second target">
                </div>
                <div class="pt-input-group">
                    <label for="var_target3">Target 3 (Optional):</label>
                    <input type="text" id="var_target3" name="var_target3" class="pt-input" placeholder="Enter third target">
                </div>
            </div>

            <!-- Pupil's Comments (AI Assisted) -->
            <div class="report-sub-section">
                <h3 class="sub-section-title">Pupil's Comments (Optional)</h3>
                 <div class="ai-input-group">
                    <label for="pupilCommentsNotes">Shorthand/Notes for AI Generation (Optional):</label>
                    <textarea id="pupilCommentsNotes" class="pt-input notes-input" rows="3" placeholder="e.g., Loved science. Enjoyed making models. Want to be astronaut."></textarea>
                    <button class="pt-button pt-button--secondary generate-ai-text-btn" data-target-id="var_pupilComments" data-source-id="pupilCommentsNotes" data-section-name="Pupil's Comments">Generate Pupil Comment</button>
                </div>
                <label for="var_pupilComments" class="final-output-label">Generated Pupil's Comments (Review & Edit - Optional):</label>
                <textarea id="var_pupilComments" name="var_pupilComments" class="pt-input final-text-output" rows="4" placeholder="AI-generated text will appear here..."></textarea>
            </div>
        </section>

        <!-- Action Button -->
        <section id="action-section" class="text-center">
            <button id="prepareDataBtn" class="pt-button pt-button--primary pt-button--lg">
                Prepare Data for Make.com
            </button>
            <div id="loadingIndicator" class="loading-text" style="display: none;">
                <div class="spinner"></div>
                Generating AI text...
            </div>
        </section>

        <!-- Output for Make.com variables -->
        <section class="pt-card" id="makeComDataOutputSection" style="display:none;">
            <h2 class="pt-card-title">G. Data for Make.com</h2>
            <p>Copy the JSON data below and use it in your Make.com scenario (e.g., in a JSON Parse module after the Webhook).</p>
            <pre id="makeComDataOutput" class="report-output-area"></pre>
        </section>

        <footer>
            <p class="text-color-muted text-center footer-text">Report Data Entry Tool</p>
        </footer>
    </div>
    <script src="script.js"></script>
</body>
</html>
